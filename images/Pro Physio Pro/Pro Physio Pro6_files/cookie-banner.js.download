class CookieBanner extends ModalElement{constructor(){super(),theme.config.isTouch?new theme.initWhenVisible(this.init.bind(this)):this.init()}get testMode(){return this.getAttribute("data-test-mode")==="true"}get delay(){return this.hasAttribute("data-delay")?parseInt(this.getAttribute("data-delay")):5}get acceptButton(){return this.querySelector('button[name="accept"]')}get declineButton(){return this.querySelector('button[name="decline"]')}init(){if(this.testMode){this.load(this.delay);return}window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1",onLoad:this.onConsentLibraryLoaded.bind(this)}])}load(delay){Shopify&&Shopify.designMode||(setTimeout(()=>this.show(),delay*1e3),this.acceptButton&&this.acceptButton.addEventListener("click",this.acceptPolicy.bind(this)),this.declineButton&&this.declineButton.addEventListener("click",this.declinePolicy.bind(this)))}acceptPolicy(){this.hide(),window.Shopify.customerPrivacy?.setTrackingConsent(!0,this.noop),document.addEventListener("trackingConsentAccepted",()=>{console.log("trackingConsentAccepted event fired")})}declinePolicy(){this.hide(),window.Shopify.customerPrivacy?.setTrackingConsent(!1,this.noop)}onConsentLibraryLoaded(){const userCanBeTracked=window.Shopify.customerPrivacy.userCanBeTracked(),userTrackingConsent=window.Shopify.customerPrivacy.getTrackingConsent();!userCanBeTracked&&userTrackingConsent==="no_interaction"&&this.load(this.delay)}noop(){}afterHide(){super.afterHide(),document.body.classList.remove("has-cookie-banner")}afterShow(){super.afterShow(),document.body.classList.add("has-cookie-banner")}}customElements.define("cookie-banner",CookieBanner);
//# sourceMappingURL=/s/files/1/0885/0371/4123/t/2/assets/cookie-banner.js.map?v=1731509136
