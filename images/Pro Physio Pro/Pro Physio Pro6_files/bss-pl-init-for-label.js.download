!function(e){var t={};function s(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function a(e,t,s,a,r){if(!t&&s.length){let t=e(a);if(!t.hasClass("swatchProductColor")&&!t.hasClass("hero-content")){const n="absolute"==t.css("position"),o=t.hasClass("aspect-ratio")&&t.parent().hasClass("product-gallery__thumbnail");if(t.hasClass("image-slide-link")&&e(".product_gallery .slides").length&&(a=e(".product_gallery .slides")),e(".lh-big-slide .swiper-container").length&&(a=e(".lh-big-slide .swiper-container")),t.hasClass("product-single__photo-wrapper")&&e(".product-single__photos.slick-slider").length&&(a=e(".product-single__photos.slick-slider")),t.hasClass("js-product")&&t.hasClass("product")&&t.find(".product__media")&&(a=t.find(".product__media")),t.hasClass("section__title-text")&&t.hasClass("product-featured__title-text")&&(a=t.parent().parent().parent().parent().find(".product-featured__photo__item")),t.hasClass("product-item--horizontal")&&t.find(".aspect-ratio ")&&(a=t.find(".aspect-ratio")),t.hasClass("flex__item")&&t.find(".product-single__photo.product__photo-container ")&&(a=t.find(".product-single__photo.product__photo-container ")),o&&(a=e(".product-gallery__carousel")),n?"function"==typeof bssFixSupportWrapAbsoluteFirstParent&&bssFixSupportWrapAbsoluteFirstParent(e,a):"function"==typeof bssFixSupportNotAddRelativeFirstParent&&bssFixSupportNotAddRelativeFirstParent()||t.css("position","relative"),t.hasClass("product-fancybox")){var i=t.parent().parent();e(i).hasClass("product-image-container")&&(a=i)}const p=`<div class="bss_pl_img" style="display: block !important;"> ${s.join("")} </div>`;n?t.find(".bss_pl_img_wrapper").append(p):t.find(".bss_pl_img").length||"function"==typeof bssFixSupportNotAddHtmlLabelFirstParent&&bssFixSupportNotAddHtmlLabelFirstParent(r)||t.find("img:not(.bss-pb-frontend)").length&&t.prepend(p)}}}function r(e,t,s,a,r,n,o){let p=!1;const l=n?".bss_pl_img.bss_pl_group_wrapper":".bss_pl_img:not(.bss_pl_group_wrapper)";if(s.hasClass("product-item__link-wrapper"))s.find(".product-item__image-container").length?(s.find(".product-item__image-container").prepend(r),p=!0):(s.find("img").wrap('<div class="product-item__image-container"></div>'),s.find(".product-item__image-container").prepend(r),p=!0);else if(s.hasClass("card__inner")&&s.closest(".card-wrapper").find(".card__inner .card__media").length){let t=s.find(".card__content");t.length&&!t.parent().find(l).length&&(e(".card--media").css("z-index","0"),e(".card--media .card__inner").css("transform","none"),t.prepend(r),p=!0)}else if(s.hasClass("card__heading")&&s.closest(".card-wrapper").find(".card__inner .card__content").length){let e=s.closest(".card-wrapper").find(".card__inner .card__content");e.length&&!e.parent().find(l).length&&(e.prepend(r),p=!0)}else if(s.hasClass("card__heading")&&!s.closest(".card__inner").find(l).length)s.closest(".card__inner").prepend(r),p=!0;else if(!s.hasClass("cart__image")||s.closest(".cart__cell--imager").find(l).length||[34096,35659,44716,37230].includes(t.storeId))if(s.hasClass("cart-item__image-wrapper")&&!s.closest(".cart-item").find(l).length)s.find(".cart-item__image-link").prepend(r),p=!0;else if(s.hasClass("cart-item__image-link")&&s.parent().hasClass("cart-item__image-wrapper")&&window.location.pathname.includes("/cart"))s.find(l).length||(s.prepend(r),p=!0);else if(s.hasClass("cart__image-wrapper")&&s.parent().hasClass("cart__product-information")&&window.location.pathname.includes("/cart"))s.find(l).length||(s.prepend(r),s.children().wrapAll("<div class='bss_wrapper' />"),e(".bss_wrapper").css("position","relative"),s.find(".cart__image").width()<s.find(".cart__image").height()&&s.find(".bss_wrapper").css("margin","0 "+s.find(".cart__image").css("margin-right")),p=!0);else if(s.parent().hasClass("cart__table-cell--image")&&!s.closest(".cart__table-cell--image").find(l).length){s.prepend(r),s.children().wrapAll("<div class='bss_wrapper' />"),e(".bss_wrapper").css("position","relative"),e(".bss_wrapper").css("width","fit-content"),e(".bss_wrapper").css("margin","0 auto");let t=s.find(".cart__image").width();s.find(".cart__image").css("padding-right",0),s.find(".cart__image").css("width",t+"px"),p=!0}else if(s.hasClass("product__info-container")&&!s.closest(".featured-product").find(l).length)s.closest(".featured-product").find(".product__modal-opener").prepend(r),p=!0;else if(s.is(".product__photo.featured-product__photo")&&""==a&&s.find(".featured-product__photo-wrapper .product__photo--single").length)s.find(".featured-product__photo-wrapper .product__photo--single").prepend(r),p=!0;else if(s.is(".grid__item.product-single__meta--wrapper")&&""==a&&s.closest(".grid.product-single").find(".product-single__media-wrapper .product-single__media").length)s.closest(".grid.product-single").find(".product-single__media-wrapper .product-single__media").prepend(r),p=!0;else if(s.hasClass("grid-view-item")){let e=s.find(".grid-view-item__image-wrapper");e.length&&(e.prepend(r),p=!0)}else if(s.hasClass("rimage-wrapper")&&"products"==a){let e=s.closest(".product-detail__images").find(".rimage-wrapper").first();0==e.find(l).length&&(e.prepend(r),p=!0)}else if(s.find(".product-card__image-with-placeholder-wrapper").length)s.find(".product-card__image-with-placeholder-wrapper").prepend(r),p=!0;else if(Shopify&&Shopify.theme&&t.themeName&&-1!==t.themeName.indexOf("Brooklyn")&&s.hasClass("product-single__media")&&"products"==a)s.parent().hasClass("product-single__media-wrapper")&&(s.prepend(r),s.find(".bss_pl_img img").css("right","auto"),p=!0);else if(s.hasClass("product-single__media"))s.parent().hasClass("product-single__media-wrapper")&&(s.prepend(r),p=!0);else if(s.hasClass("product-single__photo")&&!s.parent().hasClass("photos__item photos__item--main")&&19256!=t.storeId){s.parent().hasClass("product-single__photo-wrapper")&&(s.prepend(r),p=!0);let e=s.parent().parent();e.hasClass("slick-list")&&!e.children().hasClass("bss_pl_img")&&(e.prepend(r),p=!0)}else if(s.hasClass("product-single__photos"))s.parent().hasClass("product-single__featured-image-wrapper")&&(s.prepend(r),p=!0);else if(s.hasClass("product__photo-wrapper")&&s.hasClass("product__photo-wrapper-product-template"))s.closest(".product-single__photo").find(l).length&&s.closest(".product-single__photo").find(l).remove(),s.prepend(r),s.find(".bss_pl_img img").css("right","auto"),p=!0;else if(s.hasClass("grid-product__image-wrapper"))s.find(".product--wrapper").length&&(s.find(".product--wrapper").prepend(r),p=!0);else if(s.hasClass("product-card--list"))s.find(".product-card__image-wrapper").length&&(s.find(".product-card__image-wrapper").prepend(r),p=!0);else if(s.hasClass("card")&&s.hasClass("critical-clear"))s.find(".card__image-wrapper").prepend(r),p=!0;else if(s.hasClass("grid-item")&&s.find(".product-grid-image--centered").length){let e=s.find(".product-grid-image--centered");e.css("position","relative"),e.prepend(r),p=!0}else if("offers"==s.attr("itemprop"))e(".grid-item .no-js.product__image-wrapper").length?e(".grid-item .no-js.product__image-wrapper").prepend(r):e(".product-single__hero .grid__item .product-single__photos").length&&e(".product-single__hero .grid__item .product-single__photos").css("position","relative").prepend(r),p=!0;else if(s.hasClass("product-single__photo-wrapper")&&s.parent().hasClass("product-single__photo--container"))s.css("position","relative").prepend(r),p=!0;else if(s.hasClass("product-single__photo-wrapper")&&s.parent().hasClass("grid__item")&&19256!=t.storeId)s.css("position","relative").prepend(r),p=!0;else if(s.hasClass("feature-row__text")&&s.hasClass("feature-row__item")){let e=s.parent();e.find(".feature-row__image-wrapper").length&&!e.find(".supports-js").length&&e.find(".feature-row__image-wrapper").prepend(r),p=!0}else if(s.hasClass("slideshow__slide"))p=!0;else if(s.hasClass("product-gallery--image-background")&&s.parent().hasClass("product-gallery--media"))s.parent().prepend(r),p=!0;else if(s.hasClass("zoomGalleryActive")&&s.parent().hasClass("slick-slide"))e(".pt-product-single-img").prepend(r),p=!0;else if(s.hasClass("cbb-also-bought-product")&&s.find("a").length)e(".pt-product-single-img").find("a").prepend(r),p=!0;else if(s.hasClass("product-block")&&s.has("grid__item"))s.find(".product-block__image").length&&(s.find(".product-block__image").prepend(r),p=!0);else if(s.hasClass("image__container")||s.hasClass("product-single__photo__item")&&s.hasClass("slick-slide")||s.hasClass("product-galley--image-background")||s.hasClass("grid-product__content")&&22555!=t.storeId&&34096!=t.storeId&&35115!=t.storeId&&29966!=t.storeId||!s.hasClass("recomatic-product-wrap")&&s.hasClass("swiper-slide")&&s.parent().hasClass("swiper-wrapper"))s.css("position","relative"),s.prepend(r),p=!0;else if(s.hasClass("product-item")&&s.find(".product-item__image-wrapper").length){let e=s.find(".product-item__image-wrapper");e.css("position","relative"),e.prepend(r),p=!0}else if(s.hasClass("product-item")&&s.find(".product-item__thumbnail").length){let e=s.find(".product-item__thumbnail");e.css("position","relative"),e.prepend(r),p=!0}else if(s.hasClass("product__main-photos"))s.hasClass("aos-animate")||s.prepend(r),p=!0;else if(s.hasClass("product-thumb"))s.parent().hasClass("collection-products-wrapper")&&(s.prepend(r),p=!0);else if(s.parent().hasClass("shopify-product-gallery__image"))s.parent().prepend(r),p=!0;else if(s.hasClass("product-collection__image")||s.hasClass("tt-image-box")||!s.parent().parent().hasClass("slick-slide")||33551==t.storeId)if(s.hasClass("productitem")){let e=s.find(".productitem--image-link");e.length&&(e.css("position","relative"),e.prepend(r),p=!0)}else if(s.hasClass("o-layout__item")){var d=s.find(".product__media");d.length&&(d.css("position","relative"),d.prepend(r),p=!0)}else if(s.hasClass("thumbnail")&&s.hasClass("columns"))s.find(".product_image").length&&(s.find(".product_image").prepend(r),p=!0);else if(s.hasClass("fancybox")&&e("#shopify-section-product-template .flexslider").length)s.parent().prepend(r),p=!0;else if(s.hasClass("rimage-wrapper")||s.hasClass("rimage-outer-wrapper"))s.parent().parent().hasClass("thumbnail--media-image")||s.prepend(r),p=!0;else if(s.hasClass("product-media--image")&&s.parent().hasClass("main"))0==s.find(l).length&&0==s.find(".rimage-wrapper[data-handle]").length&&(s.css("position","relative"),s.prepend(r),p=!0);else if(17149!=t.storeId&&s.hasClass("prod-image")){let t=s.parent();e(t).hasClass("prod-container")&&(e(t).css("position","relative"),e(t).prepend(r),p=!0)}else if(17162!=t.storeId&&s.hasClass("aspect-ratio")&&e("#shopify-section-product-template .flickity-viewport").length){var c=e("#shopify-section-product-template .flickity-viewport");0==e(c).find(l).length&&(e(c).prepend(r),p=!0)}else if(s.hasClass("product-single__meta")){var f=s.parent().parent().find(".product-single__featured-image-wrapper");f.length&&(e(f).prepend(r),p=!0)}else if(s.hasClass("cart-mini-item-image"))p=!0;else if(s.hasClass("snize-product"))if(16487==t.storeId&&"collections"==a);else{let t=s.find(".snize-thumbnail");t.length&&(e(t).prepend(r),p=!0)}else if(s.hasClass("fotorama__stage__frame")||s.parent().hasClass("product-page-gallery__thumbnail")){let t=e(".product-page-gallery__main--single.product-page-gallery__main");t.length&&0==t.find(l).length&&(e(t).css("position","relative"),e(t).prepend(r)),p=!0}else if(s.hasClass("tt-layout-vertical")){let t=s.find(".tt-img");t.length&&(e(t).prepend(r),p=!0)}else if(s.hasClass("zoom-container")){let t=e("#shopify-section-product__main .product-gallery__main .flickity-viewport");t.length?e(t).prepend(r):s.prepend(r),p=!0}else if(s.hasClass("recomatic-product-wrap")){let t=s.find(".recomatic-image-wrap");t.length&&(e(t).prepend(r),p=!0)}else if(s.hasClass("gf_module-center"))s.find("a").prepend(r),p=!0;else if(s.hasClass("vtl-product-card__header"))s.find(".vtl-product-card__image").prepend(r),p=!0;else if(s.hasClass("vtl-pb-main-widget__product-image")){let e=s.find("a");e.length&&(e.prepend(r),e.css("text-decoration","none"));var u=s.find(".bss-pl-frontend");u.length&&u.css("position","relative"),p=!0}else if(s.hasClass("photo-zoom-link ")){let e=s.parent().parent();e.hasClass("product-image-main")&&e.prepend(r),p=!0}else if(s.hasClass("image--container")&&s.parent().hasClass("image--root")){let e=s.parent().parent().parent();e.hasClass("modal--link")&&0==e.find(l).length&&(e.prepend(r),p=!0)}else if(s.hasClass("image-container-position")){let e=s.parent().parent();e.hasClass("image-container")&&!e.find(l).length&&(e.prepend(r),p=!0)}else if(s.hasClass("gallery__image-wrapper")&&s.hasClass("gallery__image-wrapper--scale"))s.prepend(r),p=!0;else if(s.hasClass("product__submedia-wrapper")||s.hasClass("product__media-wrapper"))s.prepend(r),p=!0;else if(s.parent().hasClass("product-single__image-wrapper")){s.parent().css("position","relative").prepend(r),p=!0}else s.hasClass("product__photo--single")?(s.prepend(r),s.find(".bss_pl_img img").css("right","auto"),p=!0):s.hasClass("cart__image-container")&&!s.closest(".cart__image-wrapper").find(l).length&&34096!=t.storeId||s.hasClass("cart-image")&&!s.closest(".grid-item").find(l).length||s.hasClass("cart__table-cell")&&!s.find(l).length||s.hasClass("link-image")&&s.parent().hasClass("cart__table-cell")&&!s.parent().find(l).length||s.parent().hasClass("cart__image-wrapper")&&!s.closest(".cart__image-wrapper").find(l).length||s.hasClass("featured-product__photo")||s.hasClass("product__gallery")||s.hasClass("product-media--featured-product")||s.hasClass("product__img-wrapper")&&30628!=t.storeId||s.hasClass("product__image-container")||s.hasClass("product-single__photo")&&s.parent().hasClass("photos__item photos__item--main")||s.hasClass("featured-img")||s.hasClass("c-slide-product__wrap-image")&&s.hasClass("slick-slide")||s.hasClass("image-cont")&&s.hasClass("with-secondary-image")||s.hasClass("product-gallery--media-wrapper")||s.hasClass("ProductItem__Wrapper")&&2828!=t.storeId&&14064!=t.storeId&&14983!=t.storeId&&11115!=t.storeId||s.hasClass("tt-image-box")||s.hasClass("mediaimageholder")||s.hasClass("product-element-top")&&(s.parent().parent().hasClass("owl-carousel-item-inner")||s.parent().hasClass("product-grid-item"))||s.hasClass("product-collection__image")||s.parent().hasClass("product-top")&&s.hasClass("product-image")&&25867!=t.storeId||s.hasClass("fancybox")&&s.parent().hasClass("thumb")||s.hasClass("proHImage")||s.hasClass("proFeaturedImage")||s.hasClass("mthumb")&&s.parent().hasClass("owl-item")||s.is("#bigimage")||s.hasClass("position-relative")||s.hasClass("product__image-wrapper")&&s.hasClass("no-js")||s.is("media-gallery .product-media-container .product-media")&&t.helper.isThemeFree()?(s.prepend(r),p=!0):s.is("product-card.product-card")&&t.helper.isThemeFree()?(s.find(".card-gallery .product-media").prepend(r),p=!0):s.is(".boost-sd__product-item .boost-sd__product-image-wrapper")&&(s.find(".boost-sd__product-image").prepend(r),p=!0);else s.parent().prepend(r),p=!0;else s.prepend(r),s.children().wrapAll("<div class='bss_wrapper' />"),e(".bss_wrapper").css("position","relative"),e(".bss_wrapper").css("width","fit-content"),e(".bss_wrapper").css("margin","0 auto"),p=!0;if(p=i(e,s,a,r,p),window.location.pathname.includes("/rapid-search-results")&&s.hasClass("rps-product-image-container")&&(s.prepend(r),p=!0),"products"==a&&e("[appendvariant = true]").length&&!e("[appendvariant = true]").find(l).length&&(e("[appendvariant = true]").append(r),p=!0),(e(".type_product_scroll")||e(".type_product_grid"))&&s.hasClass("card-information__text")){let t=s.closest(".card-wrapper").find(".card__inner .media");e(t).length&&!e(t).find(l).length&&(t.prepend(r),p=!0)}if(e(".ecom-builder")&&e(".ecom-builder").length&&"products"==a&&(s.hasClass("ecom-product-single__media--image")&&s.closest(".ecom-product-single__media-wrapper").length&&!s.find(l).length&&(s.prepend(r),p=!0),s.hasClass("ecom-collection__product-media-wrapper")&&s.closest(".ecom-collection__product-item--wrapper").length&&!s.find(l).length&&(s.prepend(r),p=!0)),t.page.isBeaeBuilderPage()&&(e(".beae-product-single__add-to-cart--dynamic-checkout").css({"flex-direction":"column"}),e(".shopify-payment-button").css({"margin-bottom":"15px"}),(s.hasClass("beae-product-single__media--image")||s.hasClass("beae-product-media"))&&(s.prepend(r),p=!0)),![33734,31585].includes(t.storeId)&&-1!==t.themeName.indexOf("Dawn")){if(s.hasClass("card-information__text")||s.hasClass("card__heading")){let e=s.closest(".card-wrapper").find(".card__media");e.length&&!e.closest(".card--media").find(l).length&&(e.prepend(r),p=!0)}if(s.hasClass("product__media")&&!s.parent().parent().find(l).length&&(s.prepend(r),p=!0),s.hasClass("product__info-container")){let t=s.closest(".featured-product").find(".product__media");e(t).length&&!e(t).find(l).length&&(t.prepend(r),p=!0)}}if(s.closest(".gem-slider-item").length&&!s.closest(".gallery-wrapper").length&&s.parent().find(`img:not(${l})`).length&&!s.parent().find(l).length&&(s.parent().append(r),p=!0),s.closest('form[action="/cart"]').length&&!s.closest("#CartDrawer").length){const t=s.closest('[class*="cart"][class*="media"]');t.length&&e(t).find(`img:not(${l})`).length&&!e(t).find(l).length&&(e(t).find(`img:not(${l})`).parent().prepend(r),p=!0)}const _=new WeakSet;function h(e){return["class","id","role"].some(t=>{const s=e.getAttribute(t)||"";return s.toLowerCase().includes("zoom")||s.includes("presentation")})}function g(e){let t=0;for(;e;)t+=e.offsetTop||0,e=e.offsetParent;return t}function m(e,t){if(!e||!t)return 0;const s=Math.max(e.length,t.length);let a=0;for(let r=0;r<s;r++)e[r]===t[r]&&a++;return a/s}function C(e){if(!e||!e.parentElement)return null;let t=0,s=null,a=e;const r=window.innerWidth<768;for(;a.parentElement;){const e=a.parentElement;if(e===document.body||e===document.documentElement){e.clientWidth>t&&(s=e);break}const r=e.clientWidth;r>t&&(t=r,s=e),a=e}if(r&&s){const e=(e=>{let t=e;for(;t&&t.parentElement&&"BODY"!==t.tagName;){const e=t.parentElement;if("BODY"===e.tagName)break;if(Array.from(e.children).indexOf(t)>0)return e;t=e}return null})(s);e&&(s=e)}return s}function b(e,t=5){if(!e)return!1;let s=0,a=e.parentElement;for(;a&&s<t;){if(a instanceof HTMLElement){const e=[...a.classList].map(e=>e.toLowerCase()),t=window.getComputedStyle(a),r=parseInt(t.zIndex),i=t.position,n=e.some(e=>e.includes("modal")),o=e.some(e=>e.includes("logo")),p=e.some(e=>e.includes("banner")),l=e.some(e=>e.includes("card")),d=e.some(e=>e.includes("poster")),c=e.some(e=>e.includes("video"));if(p||l||d||c&&1!=s||o)return!0;if(n&&!isNaN(r)&&r>2)return!0;if(!["relative","absolute"].includes(i)&&r&&1!=s&&!isNaN(r)&&r>2)return!0;if("fixed"==i&&r&&1!=s&&!isNaN(r)&&r<0)return!0}a=a.parentElement,s++}return!1}function w(e){const t={};if(!e)return[];for(const[s,a]of Object.entries(e)){if(0===a.length)continue;const e=new Map;for(const t of a){const s=t.currentSrc||"unknown";e.has(s)||e.set(s,[]),e.get(s).push(t)}const r=[];for(const t of e.values())t.length>1?t.forEach(e=>{((e.width||0)>0&&(e.height||0)>0||0==(e.aria||0)&&0==e.offsetTop||0===(e.width||0)&&0===(e.height||0)&&0!==e.offsetTop)&&r.push(e)}):r.push(t[0]);r.length>0&&(r.sort((e,t)=>{const s=(e.offsetTop||0)-(t.offsetTop||0);return 0!==s?s:(e.area||0)-(t.area||0)}),t[s]=r)}return function(e){const t=document.documentElement.clientWidth,s={},a=[];let r=0;for(const[i,n]of Object.entries(e)){if(n.length>1){s[i]=n;continue}const e=n[0];e.width!==t?(s[i]=[e],r++):a.push(e)}const i={};for(const e of a){const t=e.aria,s=e.offsetTop;if((!t||"0"===t)&&0===s)continue;const a=t&&"0"!==t?"aria-"+t:"top-"+s;i[a]||(i[a]=[]),i[a].push(e)}const n=new Set;Object.values(s).forEach(e=>{e.forEach(e=>{void 0!==e.offsetTop&&n.add(e.offsetTop)})});for(const[e,t]of Object.entries(i))if(r<=1&&(s[e]=t),t.length>1)s[e]=t;else{const a=t[0];0!==a.offsetTop&&n.has(a.offsetTop)&&(s[e]||(s[e]=[]),s[e].push(a))}return s}(t)}function y(){const e=[...document.querySelectorAll('form[action*="/cart/add"]')],t=e.find(e=>{const t=e.getAttribute("id")||"",s=e.getAttribute("class")||"";return!(/product_grid_cart_form/.test(s)||/\bgrid\b/.test(s)&&/\bcart\b/.test(s))&&(/product/i.test(t)||/product/i.test(s))})||e.find(e=>{const t=e.getAttribute("id")||"",s=e.getAttribute("class")||"";return!(/product_grid_cart_form/.test(s)||/\bgrid\b/.test(s)&&/\bcart\b/.test(s))&&(!/sticky/i.test(t)&&!/sticky/i.test(s))});if(!t)return{largestImages:[],thumbnails:[]};let s=C(t);window.innerWidth<=768&&s&&(s=C(s));const a=function(e){if(!e)return[];const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(_.has(e))return NodeFilter.FILTER_REJECT;if(e.closest("header"))return NodeFilter.FILTER_REJECT;const t=e.tagName,s="IMG"===t||"PICTURE"===t||"CANVAS"===t,a=window.getComputedStyle(e).backgroundImage,r=!!!e.querySelector("img[src]")&&"none"!==a&&/^url\(["']?.+["']?\)$/.test(a);return s||r?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let a=0;for(;s.nextNode();){const e=s.currentNode;_.add(e);const r=e.tagName,i=e.getAttribute("class")||"",n=i.toLowerCase(),o=e.currentSrc||e.src||"",p=e.offsetWidth,l=e.offsetHeight,d=p*l||0,c=g(e),f=e.closest("a"),u=(i+o+((f&&f.getAttribute("class")||"")+(f&&f.getAttribute("id")||""))).toLowerCase(),m=u.includes("logo")||u.includes("banner")||u.includes("poster"),C=n.includes("video"),w=n.includes("bss"),y=b(e),v=h(e),T=0===d||d>2500,x=0!==p&&0!==l&&(p<200&&l<200||l<100),S={element:e,width:p,height:l,area:d,className:i,currentSrc:e.currentSrc,offsetTop:c,type:"IMG"===r?"img":"background"};v||C||!T||m||x||w||!(c>=0)||y||"SELECT"===e.tagName||(0===d&&a++,t.push(S))}let r=t;return a>400&&(r=t.filter(e=>0!=e.area)),r}(s);return{elementImages:function(e){return e.map(e=>e.element)}(function(e){if(!Array.isArray(e)||0===e.length)return[];let t=0,s=0,a=e[0].offsetTop;for(const r of e){const e=(r.width||0)*(r.height||0);0==a&&(a=r.offsetTop),e>0&&e>s&&a>0&&r.offsetTop<=a&&(a=r.offsetTop,s=e),a===r.offsetTop&&0!=a&&t++}return e.filter(e=>{const r=(e.width||0)*(e.height||0);return 0===r||t>0&&t<3&&(r==s||s/r>=.7)||t>=3&&r>.4*s&&r<=s&&.5*e.offsetTop<=a||t>=3&&e.offsetTop==a&&s/r>=.9||t>=3&&.5*e.offsetTop<=a>.9&&s/r>=.7||t<=1&&r>=.5*s&&r<=s})}(function(e){let t=null,s=null;const a=[];for(const[r,i]of Object.entries(e)){if(!i.length)continue;const e=i.filter(e=>(e.area||0)>0).reduce((e,t)=>{const s=t.area||0,a=t.offsetTop||0;if(!e)return{...t,area:s};const r=e.offsetTop||0,i=e.area||0;return 0!=a&&0!=s&&.5*a<=r&&s>=i&&s<=2*i?{...t,area:s}:e},null);e&&(t?0===t.offsetTop||0!==e.offsetTop&&e.offsetTop===t.offsetTop&&e.area>t.area||e.offsetTop-t.offsetTop<=10&&e.area>t.area||.5*e.offsetTop<=t.offsetTop&&e.area>t.area||.5*e.offsetTop<=t.offsetTop&&e.area<t.area&&e.area>.5*t.area?(a.length=0,a.push(...i),t=e,s=r):0!==e.offsetTop&&e.offsetTop===t.offsetTop&&.5*e.area<=t.area||e.area===t.area?a.push(...i.filter(t=>t.offsetTop===e.offsetTop&&(t.area||0)>=.5*e.area||t.area===e.area||e.area/t.area>=.9||0===t.offsetTop&&0===t.aria)):a.push(...i.filter(e=>0===e.offsetTop&&0===e.area)):(t=e,s=r,a.push(...i)))}return a.length>0?a:s?e[s]:[]}(function(e){const t=Object.entries(e).map(([e,t])=>{const s=function(e){return e.filter(e=>(e.area||0)>0).reduce((e,t)=>{const s=t.area||0;return e?s>e.area||s===e.area&&t.offsetTop<e.offsetTop?{...t,area:s}:e:{...t,area:s}},null)}(t);return s?{key:e,group:t,best:s}:null}).filter(Boolean);return t.sort((e,t)=>e.best.offsetTop-t.best.offsetTop),Object.fromEntries(t.map(({key:e,group:t})=>[e,t]))}(w(function(e,t=.6,s=.6){const a={};let r=0;const i=new Set;if(!e)return[];const n=e.map((e,t)=>({img:e,index:t})).filter(e=>!i.has(e.index)).sort((e,t)=>((t.img.className||"").split(/\s+/).length||0)-((e.img.className||"").split(/\s+/).length||0));for(;n.length>0;){const{img:e,index:o}=n.shift(),p=(e.className||"").trim().split(/\s+/),l=[e];i.add(o);for(let e=0;e<n.length;){const{img:a,index:r}=n[e],o=(a.className||"").trim().split(/\s+/),d=new Set(o),c=p.filter(e=>d.has(e)),f=p.flatMap(e=>o.filter(t=>!d.has(e)&&m(e,t)>=s));(c.length+f.length)/new Set([...p,...o]).size>=t?(l.push(a),i.add(r),n.splice(e,1)):e++}a["group_"+r++]=l}return a}(a)))))),targetContainer:s}}let v=!0;return"function"==typeof bssFixSupportTurnOffAutoAppendLabel&&(v=bssFixSupportTurnOffAutoAppendLabel()),setTimeout(()=>{if("products"===a&&!o.some(e=>1==e.label_on_image)&&v&&t.storeIdOptimizeAppendLabel&&t.storeId>t.storeIdOptimizeAppendLabel){const{elementImages:a,targetContainer:i}=y();if(!a)return;const n=a.some(t=>s.has(e(t)).length||s.is(e(t)));if(e(i).has(s).length&&n&&!e(parent).find(l).length&&s.attr("data-handle")==t.page.getHandleProductPage()){let s=0;a.forEach(t=>{e(t).parent().find(l).length||(e(t).parent().append(r),p=!0,s++)}),s>0&&(null===t.optimizeCodeIds||!t.optimizeCodeIds.split(",").includes("optimize_append_label"))&&async function(e){const s=`https://support.tech-arms.io/api/executed-optimize-code-ids/${t.storeId}/label`,a={executedOptimizeCodes:e};try{const e=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw new Error("Update failed with status "+e.status)}catch(e){console.error("Error in updateOptimizeCodes:",e.message)}}(["optimize_append_label"])}}},1e3),p}function i(e,t,s,a,r){return BSS_PL.page.isProductPage()&&t.is(".product__media-item modal-opener .product__media")&&(t.prepend(a),r=!0),r}s.r(t),BSS_PL.initForLabel=function(e,t,s,i,n,o){let p=t.configs.label;[47822,49305].includes(t.storeId)&&(p=t.configData.filter(e=>2!=e.label_type));let l=t.page.getPageName(),d=new Map,c=!1;let f=!0;if("function"==typeof bssFixSupportTurnOnDetectProductImageSize&&(f=bssFixSupportTurnOnDetectProductImageSize()),!t.productItemSize&&f&&t.detectProductImageSize(e),e.each(s,(function(s,a){const i=e(a),f=t.common.getLabelHtmlList(e,p,n,o,a,d);if(t.page.isCartPage()&&!i.closest(".featured-product").length&&!i.closest(".card-wrapper").length){let t=p.map(e=>4==e.product_type?e.variant.split(","):[]).flat(),s=i.closest(".line-item");const r=[".cart-item",".cart__row",".cart-page__item",".cart__table-row",".ajax-cart__item-image__wrapper",".cart__card"];for(let e of r)if(i.hasClass(e)){s=i.closest(e);break}let n=s.find('a[href*="variant"]');if(n.length){let s=e(n[0]).attr("href").split("=")[1];t.includes(s)&&a.setAttribute("id-variant",s)}}if(!i.find(".bss_pl_img:not(.bss_pl_group_wrapper)").length&&f.length){const s=`<div class="bss_pl_img ${9518==t.storeId?"lazyload":""}" style="display: block !important;"> ${f.join("")} </div>`;c="function"==typeof bssFixSupportAppendHtmlLabel&&bssFixSupportAppendHtmlLabel(e,t,a,l,s),c||(c=r(e,t,i,l,s,!1,p))}})),i){const s=t.common.getLabelHtmlList(e,p,n,o,i,d);a(e,c,s,i,l)}},BSS_PL.initForLabelGroup=function(e,t,s,i,n,o){let p=t.helper.checkValidConfigs(t.configDataLabelGroup,"config-group"),l=!1,d=t.page.getPageName(),c=new Map;e.each(s,(function(s,f){const u=e(f),_=t.common.getLabelGroupHtmlList(e,p,n,o,f,c);if(!u.find(".bss_pl_img.bss_pl_group_wrapper").length&&_.length){const s=`<div class="bss_pl_img bss_pl_group_wrapper ${9518==t.storeId?"lazyload":""}" style="display: block !important;"> ${_.join("")} </div>`;l="function"==typeof bssFixSupportAppendHtmlLabel&&bssFixSupportAppendHtmlLabel(e,t,f,d,s),l||(l=r(e,t,u,d,s,!0,p))}if(i){const s=t.common.getLabelGroupHtmlList(e,p,n,o,i,c);a(e,l,s,i,d)}}))}}]);